<!DOCTYPE html>
<meta http-equiv="Cache-control" content="no-cache">

<head>
    <link href="https://fonts.googleapis.com/css?family=Josefin+Slab|Lato|Rokkitt" rel="stylesheet">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <style>
        body {
            font-family: 'Rokkitt', serif;
            text-align: center;
        }
        
        #holder {
            width: 100%;
            margin: 0px;
            padding: 0px;
            text-align: left;
            font-weight: "bold";
            text-align: center;
        }
        
        #hand {
            width: 100%;
            margin: 0px;
            padding: 0px;
            text-align: left;
            font-weight: "bold";
            text-align: center;
        }
        
        #testCircle {
            height: 30%;
            width: 100%;
            margin: 0px;
            padding: 0px;
            text-align: left;
            text-align: center;
        }
        
        #logo {
            width: 50%;
            margin: 0px;
            padding: 0px;
            text-align: center;
        }
        
        h1 {
            font-size: 60px;
            padding-top: 30px;
            padding-bottom: 0px;
            font-weight: "bold";
            margin: 0px;
        }
        
        h2 {
            font-size: 35px;
            padding: 0px;
            margin: 0px;
            font-weight: bold;
        }
        
        body {
            padding: 0px;
            margin: 0px;
        }
    </style>
    <title>hi</title>
</head>

<body>
    <div id="holder">
        <h1>ECE 4760</h1>
        <h2>Real Time Force Visualization</h2>
    </div>

    <div id="hand">
        <img src="handImage.png" id="logo">
    </div>


    <div id="testCircle">

    </div>

    <script>
        var dontRun = 0;
    </script>

    <script type="text/javascript">
        window.addEventListener('error', function (e) {
            //console.log(e);
            dontRun += 1;
        }, true);
    </script>

    <script>
        var svg = d3.select("#testCircle").append("svg")
            .attr("height", 1000)
            .attr("width", 1000);

        svg.append("circle")
            .attr("r", 10)
            .attr("cx", 500) // parens -- VALUE of function call
            .attr("cy", 500) // NO parens -- function itself
            .attr("id", "circle")
            .style("fill", "red");

        var inter = setInterval(function () {
            updateData();
        }, 100);

        var jsonData;

        // var file = new File("data.csv");
        //var result = file.open('r');

        function updateData() {
            /*
                        if (file.exists) {
                            console.log("file exists");
                        }
            */

            if (!dontRun) {

                d3.json("data.txt", function (error, data) {


                    if (!error) {
                        jsonData = data;
                        //console.log(data[0])

                        var dataLength = jsonData.sensorData.length;

                        var circle = d3.select("#circle");
                        //csvData = data;
                        //console.log(data[0]);

                        circle.attr("r", jsonData.sensorData[dataLength - 1].Sensor1);


                    }







                    //dontRun = 0;
                });


            }
            if (dontRun) {
                dontRun -= 1;
            }
        }
    </script>

</body>